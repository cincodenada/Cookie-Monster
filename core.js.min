function Start_Cookie_Monster(){return 0!=$("#cookie_monster_bar").length?(alert("Cookie Monster "+version+"\n\nCookie Monster is already loaded, silly!"),!1):($("#topBar").css("display","none"),$("#tooltip").css("margin-top","32px"),$("#tooltip").css("pointer-events","none"),$("#cookies").css("background","rgba(0,0,0,0.75)"),$("#cookies").css("border-top","1px solid black"),$("#cookies").css("border-bottom","1px solid black"),$("#goldenCookie").css("cssText","z-index: 1000001 !important;"),$("#game").css("cssText","-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;-o-user-select: none;user-select: none;top: 0px;bottom: 57px;"),$("#storeTitle").css("cssText","font-size: 18px;padding: 4px 8px 2px 8px;border-bottom: 1px solid black;"),$("#storeTitle").after('<table cellpadding=0 cellspacing=0 style="width:300px; table-layout:fixed; padding:4px; font-weight:bold; background:rgba(0,0,0,0.6); border-bottom: 1px solid black; cursor:default;"><tr><td align=center style="color:#4bb8f0; padding:2px;" id="cm_up_q0">0</td><td align=center style="color:#00ff00; padding:2px;" id="cm_up_q1">0</td><td align=center style="color:#ffff00; padding:2px;" id="cm_up_q2">0</td><td align=center style="color:#ff7f00; padding:2px;" id="cm_up_q3">0</td><td align=center style="color:#ff0000; padding:2px;" id="cm_up_q4">0</td><td align=center style="color:#ff00ff; padding:2px;" id="cm_up_q5">0</td></tr></table>'),$("body").append("<div id=\"cookie_monster_bar\" style=\"z-index:1000; position:absolute; bottom:0px; left:0px; width:100%; height:56px; border-top:1px solid black; cursor:default;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;background: rgb(69,72,77); /* Old browsers */background: -moz-linear-gradient(top,  rgba(69,72,77,1) 0%, rgba(0,0,0,1) 100%); /* FF3.6+ */background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(69,72,77,1)), color-stop(100%,rgba(0,0,0,1))); /* Chrome,Safari4+ */background: -webkit-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* Chrome10+,Safari5.1+ */background: -o-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* Opera 11.10+ */background: -ms-linear-gradient(top,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* IE10+ */background: linear-gradient(to bottom,  rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%); /* W3C */filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#45484d', endColorstr='#000000',GradientType=0 ); /* IE6-9 */\"></div>"),$("body").append('<div id="cookie_monster_overlay" style="position:fixed; z-index:1000000; height:100%; width:100%; background:rgba(255,255,255,1); pointer-events:none; display:none;"></div>'),$("body").append('<div id="cookie_monster_golden_overlay" style="position:fixed; z-index:1000002; height:96px; width:96px; pointer-events:none; cursor:pointer; opacity:0; display:none; text-align:center; font-family: \'Kavoon\', Georgia,serif; font-size:32px; text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black !important;" onclick="Game.goldenCookie.click();"></div>'),$("#sectionLeft").append('<div id="cookie_monster_timer_bars_div" style="position:absolute; z-index:1000; bottom:-1px; left:0px; width:100%; pointer-events:none; text-align:center; font-family: \'Kavoon\', Georgia,serif; font-size:16px; background:rgba(0,0,0,0.6); border-top:1px solid black;"></div>'),$("link").each(function(){"img/favicon.ico"==$(this).attr("href")&&$(this).attr("id","cm_favicon")}),Make_Table(),Save_Tooltips(),Update_Game_Scripts(),Load_Settings(),Set_Up_Tooltips(),Main_Loop(),Game.Popup('<span style="color:#FFFF00; text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black !important;">Cookie Monster '+version+" Loaded!</span>"),void 0)}function Main_Loop(){Update_Table(),Update_Tooltips("all"),Do_Emphasize(),Manage_Buffs(),loops++,1==loops&&Game.RebuildStore(),setTimeout(function(){Main_Loop()},settings[3])}function Fav_Icon_Spinner(e){e>6&&(e=1),"(G) "==gc_avail?($("#cm_favicon").attr("href","http://frozenelm.com/cookiemonster/images/cm_gc_"+e+".png"),e++,setTimeout(function(){Fav_Icon_Spinner(e)},250)):$("#cm_favicon").attr("href","http://orteil.dashnet.org/cookieclicker/img/favicon.ico")}function Load_Settings(){settings=[1,1,1,1e3,1,1,1,1,0,1,1,1,1],"undefined"!=typeof Storage&&(void 0!=localStorage.FlashScreen?settings[0]=localStorage.FlashScreen:(localStorage.FlashScreen=1,settings[0]=1),void 0!=localStorage.CookieTimer?settings[1]=localStorage.CookieTimer:(localStorage.CookieTimer=1,settings[1]=1),void 0!=localStorage.BuffBars?settings[2]=localStorage.BuffBars:(localStorage.BuffBars=1,settings[2]=1),void 0!=localStorage.Refresh?settings[3]=localStorage.Refresh:(localStorage.Refresh=1e3,settings[3]=1e3),void 0!=localStorage.CookieCD?settings[4]=localStorage.CookieCD:(localStorage.CookieCD=1,settings[4]=1),void 0!=localStorage.CMBar?settings[5]=localStorage.CMBar:(localStorage.CMBar=1,settings[5]=1),void 0!=localStorage.ColoredPrices?settings[6]=localStorage.ColoredPrices:(localStorage.ColoredPrices=1,settings[6]=1),void 0!=localStorage.ShortNumbers?settings[7]=localStorage.ShortNumbers:(localStorage.ShortNumbers=1,settings[7]=1),void 0!=localStorage.CookieSound?settings[8]=localStorage.CookieSound:(localStorage.CookieSound=0,settings[8]=0),void 0!=localStorage.UpdateTitle?settings[9]=localStorage.UpdateTitle:(localStorage.UpdateTitle=1,settings[9]=1),void 0!=localStorage.LuckyAlert?settings[10]=localStorage.LuckyAlert:(localStorage.LuckyAlert=1,settings[10]=1),void 0!=localStorage.UpgradeIcons?settings[11]=localStorage.UpgradeIcons:(localStorage.UpgradeIcons=1,settings[11]=1),void 0!=localStorage.UpgradeDisplay?settings[12]=localStorage.UpgradeDisplay:(localStorage.UpgradeDisplay=1,settings[12]=1)),Show_Hide_CM_Bar()}function Save_Settings(){"undefined"!=typeof Storage&&(localStorage.FlashScreen=settings[0],localStorage.CookieTimer=settings[1],localStorage.BuffBars=settings[2],localStorage.Refresh=settings[3],localStorage.CookieCD=settings[4],localStorage.CMBar=settings[5],localStorage.ColoredPrices=settings[6],localStorage.ShortNumbers=settings[7],localStorage.CookieSound=settings[8],localStorage.UpdateTitle=settings[9],localStorage.LuckyAlert=settings[10],localStorage.UpgradeIcons=settings[11],localStorage.UpgradeDisplay=settings[12]),Show_Hide_CM_Bar()}function Show_Hide_CM_Bar(){0==settings[5]?($("#cookie_monster_bar").css("display","none"),$("#game").css("bottom","0px")):($("#cookie_monster_bar").css("display",""),$("#game").css("bottom","57px"))}function Update_Game_Scripts(){Game.Logic=new Function("",Game.Logic.toString().replace(".title=",".title=gc_avail+").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var e="\n\n'<div class=\"subsection\">'+'<div class=\"title\"><span style=\"color:#4bb8f0;\">Cookie Monster Goodies</span></div>'+'<div class=\"listing\"><b>\"Lucky!\" Cookies Required:</b> ' + CM_Lucky('reg', false) + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Cookies Required (Frenzy):</b> ' + CM_Lucky('frenzy', false) + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (MAX):</b> ' + CM_Lucky_Reward('max') + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (MAX) (Frenzy):</b> ' + CM_Lucky_Reward('max_frenzy') + '</div>'+'<div class=\"listing\"><b>\"Lucky!\" Reward (CUR):</b> ' + CM_Lucky_Reward('cur') + '</div>'+'</br><div class=\"listing\"><b>Heavenly Chips (MAX):</b> ' + CM_Heavenly_Chip('max') + '</div>'+'<div class=\"listing\"><b>Heavenly Chips (CUR):</b> ' + CM_Heavenly_Chip('cur') + '</div>'+'<div class=\"listing\"><b>Cookies To Next Chip:</b> ' + CM_Heavenly_Chip('next') + '</div>'+'<div class=\"listing\"><b>Time To Next Chip:</b> ' + CM_Heavenly_Chip('time') + '</div>'+'</div>'+";Game.UpdateMenu=new Function("",Game.UpdateMenu.toString().replace("Statistics</div>'+","Statistics</div>'+"+e).replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var t='\n\'<div class="subsection">\'+\'<div class="title"><span style="color:#4bb8f0;">Cookie Monster Settings</span></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Flash Screen \' + CM_Option_State(0) + \'</a><label>Flashes the screen when a Golden Cookie or Red Cookie appears</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Cookie Timer \' + CM_Option_State(1) + \'</a><label>Displays a timer on Golden Cookies and Red Cookies</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Cookie Sound \' + CM_Option_State(8) + \'</a><label>Plays a sound when a Golden Cookie or Red Cookie appears</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Next Cookie Timer \' + CM_Option_State(4) + \'</a><label>Displays a countdown bar and updates the Title for when the next Cookie will appear</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Update Title \' + CM_Option_State(9) + \'</a><label>Updates the Title to display if a Cookie is waiting to be clicked</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Buff Bars \' + CM_Option_State(2) + \'</a><label>Displays a countdown bar for each effect currently active</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Bottom Bar \' + CM_Option_State(5) + \'</a><label>Displays a bar at the bottom of the screen that shows all Building information</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Colored Prices \' + CM_Option_State(6) + \'</a><label>Changes the colors of all Building prices to correspond with their Cost Per Income</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Upgrade Icons \' + CM_Option_State(11) + \'</a><label>Displays a small square icon on the Upgrade to better display the Cost Per Income color value</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Short Numbers \' + CM_Short_Numbers() + \'</a><label>Formats all numbers to be shorter when displayed</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Upgrade Display (\' + CM_Upgrade_Display() + \')</a><label>Changes how the store displays Upgrades</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Lucky Alert (\' + CM_Lucky_Alert() + \')</a><label>Changes the tooltip to display if you would be under the number of cookies required for "Lucky!"</label></div>\'+\'<div class="listing"><a class="option" onclick="CM_Option_Toggle(this);">Refresh Rate (\' + CM_Refresh() + \' fps)</a><label>The rate at which Cookie Monster updates data (higher rates may slow the game)</label></div>\'+\'</div>\'+';Game.UpdateMenu=new Function("",Game.UpdateMenu.toString().replace("OFF')+'</div>'+","OFF')+'</div>'+"+t).replace("startDate=Game.sayTime(date.getTime()/1000*Game.fps,2);","startDate = formatTime(((new Date).getTime() - Game.startDate) / 1000, '');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var a='\nvar cm_id = from.id;\nif(cm_id == "") { cm_id = $(from).parents(".product").prop("id"); }\nif(cm_id == "product5" || cm_id == "product6" || cm_id == "product7" || cm_id == "product8" || cm_id == "product9") { y -= 100; }\nif(cm_id == "product8" || cm_id == "product9") { y -= 13; }\nif(cm_id == "product9" && settings[7] == 0) { y -= 13; }\n';Game.tooltip.draw=new Function("from,text,x,y,origin",Game.tooltip.draw.toString().replace("implemented');}","implemented');}"+a).replace("this.on=1;","this.on=1;\nUpdate_Tooltips('all');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.Reset=new Function("bypass",Game.Reset.toString().replace("Game.researchT=0;","Game.researchT=0;\n$('#cookie_monster_timer_bars_div').text('');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.LoadSave=new Function("data",Game.LoadSave.toString().replace("Game.Popup('Game loaded');","Game.Popup('Game loaded');\n$('#cookie_monster_timer_bars_div').text('');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.RebuildStore=new Function("",Game.RebuildStore.toString().replace("l('products').innerHTML=str;","l('products').innerHTML=str;\nUpdate_Tooltips('ob');").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,"")),Game.Draw=new Function("",Game.Draw.toString().replace("Beautify(Math.round(Game.cookiesd))","formatNumB(Game.cookiesd)").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""));var o="return formatNum(what);";Beautify=new Function("what,floats",Beautify.toString().replace("var str='';",o+"\nvar str='';").replace(/^function[^{]+{/i,"").replace(/}[^}]*$/i,""))}function CM_Heavenly_Chip(e){var t=cookies_to_h_chips(Game.cookiesReset+Game.cookiesEarned),a=cookies_to_h_chips(Game.cookiesReset+Game.cookiesEarned+sell_out),o=cookies_to_h_chips(Game.cookiesReset),n=h_chips_to_cookies(t+1)-(Game.cookiesReset+Game.cookiesEarned),i=h_chips_to_cookies(a+1)-(Game.cookiesReset+Game.cookiesEarned+sell_out);return"max"==e?formatNum(t)+" <small>("+formatNum(2*t)+"%)</small>":"max_sell_out"==e?formatNum(a)+" <small>("+formatNum(2*a)+"%)</small>":"cur"==e?formatNum(o)+" <small>("+formatNum(2*o)+"%)</small>":"next"==e?formatNum(Math.round(n)):"next_sell_out"==e?formatNum(Math.round(i)):"time"==e?formatTime(Math.round(n/Game.cookiesPs),""):void 0}function cookies_to_h_chips(e){return Math.floor(Math.sqrt(2.5*Math.pow(10,11)+2*e)/Math.pow(10,6)-.5)}function h_chips_to_cookies(e){return 5*Math.pow(10,11)*e*(e+1)}function CM_Upgrade_Display(){switch(1*settings[12]){case 1:return"Normal";case 2:return"All";case 0:return"None";default:return"Normal"}}function CM_Short_Numbers(){switch(1*settings[7]){case 1:return"ON (A)";case 2:return"ON (B)";case 0:return"OFF";default:return"OFF"}}function CM_Lucky_Alert(){switch(1*settings[10]){case 1:return"Both";case 2:return"Icons";case 3:return"Notes";case 0:return"Off";default:return"Both"}}function CM_Refresh(){switch(1*settings[3]){case 1e3:return"1";case 500:return"2";case 250:return"4";case 100:return"10";case 33:return"30";default:return"1"}}function CM_Option_State(e){return 0==settings[e]?"OFF":"ON"}function CM_Option_Toggle(e){e=$(e);var t=e.text();switch(t){case"Flash Screen ON":settings[0]=0,e.text("Flash Screen OFF");break;case"Flash Screen OFF":settings[0]=1,e.text("Flash Screen ON");break;case"Cookie Sound ON":settings[8]=0,e.text("Cookie Sound OFF");break;case"Cookie Sound OFF":settings[8]=1,e.text("Cookie Sound ON");break;case"Cookie Timer ON":settings[1]=0,e.text("Cookie Timer OFF");break;case"Cookie Timer OFF":settings[1]=1,e.text("Cookie Timer ON");break;case"Next Cookie Timer ON":settings[4]=0,e.text("Next Cookie Timer OFF");break;case"Next Cookie Timer OFF":settings[4]=1,e.text("Next Cookie Timer ON");break;case"Update Title ON":settings[9]=0,e.text("Update Title OFF");break;case"Update Title OFF":settings[9]=1,e.text("Update Title ON");break;case"Buff Bars ON":settings[2]=0,e.text("Buff Bars OFF");break;case"Buff Bars OFF":settings[2]=1,e.text("Buff Bars ON");break;case"Bottom Bar ON":settings[5]=0,e.text("Bottom Bar OFF");break;case"Bottom Bar OFF":settings[5]=1,e.text("Bottom Bar ON");break;case"Colored Prices ON":settings[6]=0,e.text("Colored Prices OFF"),Update_Tooltips("ob");break;case"Colored Prices OFF":settings[6]=1,e.text("Colored Prices ON"),Update_Tooltips("ob");break;case"Upgrade Icons ON":settings[11]=0,e.text("Upgrade Icons OFF"),Game.RebuildUpgrades();break;case"Upgrade Icons OFF":settings[11]=1,e.text("Upgrade Icons ON"),Game.RebuildUpgrades();break;case"Upgrade Display (All)":settings[12]=0,e.text("Upgrade Display (None)"),Update_Upgrade_Display();break;case"Upgrade Display (None)":settings[12]=1,e.text("Upgrade Display (Normal)"),Update_Upgrade_Display();break;case"Upgrade Display (Normal)":settings[12]=2,e.text("Upgrade Display (All)"),Update_Upgrade_Display();break;case"Short Numbers ON (B)":settings[7]=0,e.text("Short Numbers OFF"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Short Numbers OFF":settings[7]=1,e.text("Short Numbers ON (A)"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Short Numbers ON (A)":settings[7]=2,e.text("Short Numbers ON (B)"),Game.RebuildStore(),Game.RebuildUpgrades(),Update_Table();break;case"Lucky Alert (Both)":settings[10]=2,e.text("Lucky Alert (Icons)");break;case"Lucky Alert (Icons)":settings[10]=3,e.text("Lucky Alert (Notes)");break;case"Lucky Alert (Notes)":settings[10]=0,e.text("Lucky Alert (Off)");break;case"Lucky Alert (Off)":settings[10]=1,e.text("Lucky Alert (Both)");break;case"Refresh Rate (1 fps)":settings[3]=500,e.text("Refresh Rate (2 fps)");break;case"Refresh Rate (2 fps)":settings[3]=250,e.text("Refresh Rate (4 fps)");break;case"Refresh Rate (4 fps)":settings[3]=100,e.text("Refresh Rate (10 fps)");break;case"Refresh Rate (10 fps)":settings[3]=33,e.text("Refresh Rate (30 fps)");break;case"Refresh Rate (30 fps)":settings[3]=1e3,e.text("Refresh Rate (1 fps)")}Save_Settings()}function Update_Upgrade_Display(){var e=$("#upgrades");switch(1*settings[12]){case 1:e.css("cssText","");break;case 2:e.css("cssText","height: auto !important;");break;case 0:e.css("cssText","height: 0px !important;")}}function CM_Lucky(e,t){var a=Game.cookiesPs;Game.frenzy>0&&(a/=Game.frenzyPower),"frenzy"==e&&(a=7*a);var o=Math.round((1200*a+13)/.1);return t||(o=o<=Game.cookies?'<span style="color:#00FF00; font-weight:bold;">'+formatNum(o)+"</span>":formatNum(o)),o}function CM_Lucky_Reward(e){var t=Game.cookiesPs;Game.frenzy>0&&"cur"!=e&&(t/=Game.frenzyPower),"max_frenzy"==e&&(t=7*t);var a=new Array(Math.round(1200*t+13),Math.round(.1*Game.cookies+13));return("max"==e||"max_frenzy"==e)&&Math.round((1200*t+13)/.1)>Game.cookies?formatNum(a[0]):formatNum(Math.min.apply(Math,a))}function Save_Tooltips(){Game.UpgradesById.forEach(function(e,t){tooltips[t]=e.desc}),Game.ObjectsById.forEach(function(e,t){building_tooltips[t]=e.desc})}function Set_Up_Tooltips(){var e=!1;Game.UpgradesById.forEach(function(t,a){for(var o=0;upgrade_count>o;o++)if(_cup(o,a,!0)){t.desc=Manage_Tooltip(o,a,!0,!1),e=!0;break}t.bought&&t.desc!=tooltips[a]&&(t.desc=tooltips[a],e=!0)}),e&&Game.RebuildUpgrades()}function Update_Tooltips(e){("all"==e||"up"==e)&&(in_store=new Array(0,0,0,0,0,0),Game.UpgradesById.forEach(function(e,t){for(var a=0;upgrade_count>a;a++)if(_cup(a,t,!1)){Manage_Tooltip(a,t,!1,!1);break}})),("all"==e||"ob"==e)&&Game.ObjectsById.forEach(function(e){Manage_Building_Tooltip(e)})}function _cup(e,t,a){if(up=Game.UpgradesById[t],-1==up.desc.indexOf("cm_up_div_")&&!a)return!1;switch(e){case 0:if(!up.bought&&"Reinforced index finger"==up.name)return!0;break;case 1:if(!up.bought&&-1!=up.desc.indexOf("The mouse and cursors are <b>twice</b> as efficient."))return!0;break;case 2:if(!up.bought&&-1!=up.desc.indexOf("The mouse and cursors gain"))return!0;break;case 3:if(!up.bought&&"Forwards from grandma"==up.name)return!0;break;case 4:if(!up.bought&&-1!=up.desc.indexOf("Grandmas are <b>twice</b> as efficient."))return!0;break;case 5:if(!up.bought&&"Cheap hoes"==up.name)return!0;break;case 6:if(!up.bought&&-1!=up.desc.indexOf("Farms are <b>twice</b> as efficient."))return!0;break;case 7:if(!up.bought&&"Sturdier conveyor belts"==up.name)return!0;break;case 8:if(!up.bought&&-1!=up.desc.indexOf("Factories are <b>twice</b> as efficient."))return!0;break;case 9:if(!up.bought&&"Sugar gas"==up.name)return!0;break;case 10:if(!up.bought&&-1!=up.desc.indexOf("Mines are <b>twice</b> as efficient."))return!0;break;case 11:if(!up.bought&&"Vanilla nebulae"==up.name)return!0;break;case 12:if(!up.bought&&-1!=up.desc.indexOf("Shipments are <b>twice</b> as efficient."))return!0;break;case 13:if(!up.bought&&"Antimony"==up.name)return!0;break;case 14:if(!up.bought&&-1!=up.desc.indexOf("Alchemy labs are <b>twice</b> as efficient."))return!0;break;case 15:if(!up.bought&&"Ancient tablet"==up.name)return!0;break;case 16:if(!up.bought&&-1!=up.desc.indexOf("Portals are <b>twice</b> as efficient."))return!0;break;case 17:if(!up.bought&&"Flux capacitors"==up.name)return!0;break;case 18:if(!up.bought&&-1!=up.desc.indexOf("Time machines are <b>twice</b> as efficient."))return!0;break;case 19:if(!up.bought&&-1!=up.desc.indexOf("the more milk you have"))return!0;break;case 20:if(!up.bought&&-1!=up.desc.indexOf("Cookie production multiplier <b>+"))return!0;break;case 21:if(!up.bought&&-1!=up.desc.indexOf("for each 50 grandmas"))return!0;break;case 22:if(!up.bought&&-1!=up.desc.indexOf("for each 20 portals"))return!0;break;case 23:if(!up.bought&&"Elder Pledge"==up.name)return!0;break;case 24:if(!up.bought&&"Elder Covenant"==up.name)return!0;break;case 25:if(!up.bought&&"Sacrificial rolling pins"==up.name)return!0;break;case 26:if(!up.bought&&-1!=up.desc.indexOf("Golden cookie"))return!0;break;case 27:if(!up.bought&&-1!=up.desc.indexOf("Clicking gains <b>+1% of your CpS</b>."))return!0;break;case 28:if(!up.bought&&-1!=up.desc.indexOf("Grandmas are <b>4 times</b> as efficient."))return!0;break;case 29:if(!up.bought&&-1!=up.desc.indexOf("Antimatter condensers are <b>twice</b> as efficient."))return!0;break;case 30:if(!up.bought&&"Sugar bosons"==up.name)return!0;break;case 31:if(!up.bought&&"Revoke Elder Covenant"==up.name)return!0;break;case 32:if(!up.bought&&-1!=up.desc.indexOf("heavenly chips"))return!0}return!1}function Manage_Tooltip(e,t,a,o){var n=0,i=0;switch(e){case 0:n=_bam("The mouse and cursors",.1,0);break;case 1:n=_bte(0);break;case 2:n=_mcg(t);break;case 3:n=_bam("Grandmas",.3,1);break;case 4:n=_bte(1),_lgt(t)&&i++;break;case 5:n=_bam("Farms",.5,2);break;case 6:n=_bte(2);break;case 7:n=_bam("Factories",4,3);break;case 8:n=_bte(3);break;case 9:n=_bam("Mines",10,4);break;case 10:n=_bte(4);break;case 11:n=_bam("Shipments",30,5);break;case 12:n=_bte(5);break;case 13:n=_bam("Alchemy labs",100,6);break;case 14:n=_bte(6);break;case 15:n=_bam("Portals",1666,7);break;case 16:n=_bte(7);break;case 17:n=_bam("Time machines",9876,8);break;case 18:n=_bte(8);break;case 21:n=_gpg();break;case 22:n=_gpp();break;case 23:i+=_cha("Elder nap"),4==Game.pledges&&(i+=_cha("Elder slumber"));break;case 24:i+=_cha("Elder calm");break;case 28:n=_fte(1);break;case 29:n=_bte(9);break;case 30:n=_bam("Antimatter condensers",99999,9);break;case 32:n=_dhc(i,t,n),_lhc(t)&&(i+=_cha("Wholesome"))}return 19==Game.UpgradesOwned&&(i+=_cha("Enhancer")),49==Game.UpgradesOwned&&(i+=_cha("Augmenter")),99==Game.UpgradesOwned&&(i+=_cha("Upgrader")),n+=Get_Achi_Worth(i,t,n,0),o?n:tooltips[t]+Colorize(n,t,a)}function _dhc(e,t,a){var o=Game.UpgradesById[t],n=o.desc.indexOf("<b>")+3,i=o.desc.indexOf("%"),s=1*o.desc.substr(n,i-n),r=Get_Achi_Worth(e,t,a,2*Game.prestige["Heavenly chips"]*(s/100));return r-Game.cookiesPs}function _lhc(e){return"Heavenly key"==Game.UpgradesById[e].name?!0:!1}function _cpc(){return.01*Game.mouseCps()*usr_clk}function _lgt(e){if(1==_cha("Elder")&&-1!=Game.UpgradesById[e].name.indexOf(" grandmas")){var t=new Array,a=new Array;if(Game.UpgradesById.forEach(function(e,o){e.bought&&-1!=e.name.indexOf(" grandmas")?t.push(o):e.bought||-1==e.name.indexOf(" grandmas")||a.push(o)}),1==a.length&&a[0]==e)return!0}return!1}function _cha(e){var t=0;return Game.AchievementsById.forEach(function(a){a.won||a.name!=e||(t=1)}),t}function _gpp(){var e=1;return Game.UpgradesById.forEach(function(t){t.bought&&-1!=t.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(e=2*e),t.bought&&-1!=t.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(e=4*e)}),.05*Game.ObjectsById[7].amount*e*Game.ObjectsById[1].amount*Game.globalCpsMult}function _gpg(){var e=1;return Game.UpgradesById.forEach(function(t){t.bought&&-1!=t.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(e=2*e),t.bought&&-1!=t.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(e=4*e)}),.02*Game.ObjectsById[1].amount*e*Game.ObjectsById[1].amount*Game.globalCpsMult}function _mcg(e){var t=Game.UpgradesById[e].desc,a=31;-1!=t.indexOf(" another ")&&(a+=8);var o=1*t.substr(a,t.indexOf("<",a)-a);return o*(Game.BuildingsOwned-Game.ObjectsById[0].amount)*Game.ObjectsById[0].amount*Game.globalCpsMult}function _bte(e){return Game.ObjectsById[e].storedTotalCps*Game.globalCpsMult}function _fte(e){return 3*Game.ObjectsById[e].storedTotalCps*Game.globalCpsMult}function _bam(e,t,a){var o=1;return Game.UpgradesById.forEach(function(t){t.bought&&-1!=t.desc.indexOf(e+" are <b>twice</b> as efficient.")&&(o=2*o),t.bought&&-1!=t.desc.indexOf(e+" are <b>4 times</b> as efficient.")&&(o=4*o)}),t*o*Game.ObjectsById[a].amount*Game.globalCpsMult}function _inc(e){var t=0;return Game.AchievementsById.forEach(function(a){var o=a.desc.replace(/,/g,"");a.won||-1==o.indexOf(" per second.")||e>=1*o.substr(8,o.indexOf("</b>",8)-8)&&t++}),t}function Get_Achi_Worth(e,t,a,o){var n=0,i=Calc_Heavenly_Mult();0!=o&&(i=o);var s=0,r=new Array(0,0,0,0),d=Game.milkProgress,c=Get_Frenzy_Mult();Game.UpgradesById.forEach(function(e){var a=e.desc.replace("[Research]<br>","");e.bought&&-1!=a.indexOf("Cookie production multiplier <b>+")&&(i+=1*a.substr(33,a.indexOf("%",33)-33)),e.bought||-1==a.indexOf("Cookie production multiplier <b>+")||e.id!=t||(s+=1*a.substr(33,a.indexOf("%",33)-33)),e.bought&&"Kitten helpers"==e.name&&(r[0]=.05),e.bought&&"Kitten workers"==e.name&&(r[1]=.1),e.bought&&"Kitten engineers"==e.name&&(r[2]=.2),e.bought&&"Kitten overseers"==e.name&&(r[3]=.2)});var l=100+i;l*=1+r[0]*d,l*=1+r[1]*d,l*=1+r[2]*d,l*=1+r[3]*d;var u=a,m=(Game.cookiesPs+u)/Game.globalCpsMult*(l/100)*c;d+=.04*e,l=100+i+s,l*=1+r[0]*d,l*=1+r[1]*d,l*=1+r[2]*d,l*=1+r[3]*d;var h=0;switch(Game.UpgradesById[t].name){case"Kitten helpers":h=.05;break;case"Kitten workers":h=.1;break;case"Kitten engineers":h=.2;break;case"Kitten overseers":h=.2}l*=1+h*d,n=(Game.cookiesPs+u)/Game.globalCpsMult*(l/100)*c-m;var f=_inc(n+m);return f>0&&(d+=.04*f,l=100+i+s,l*=1+r[0]*d,l*=1+r[1]*d,l*=1+r[2]*d,l*=1+r[3]*d,l*=1+h*d,n=(Game.cookiesPs+u)/Game.globalCpsMult*(l/100)*c-m),0!=o&&(n=(Game.cookiesPs+u)/Game.globalCpsMult*(l/100)*c),Game.Has("Elder Covenant")&&(n*=.95),n}function Calc_Heavenly_Mult(){var e=2*Game.prestige["Heavenly chips"],t=0;return Game.Has("Heavenly chip secret")&&(t+=.05),Game.Has("Heavenly cookie stand")&&(t+=.2),Game.Has("Heavenly bakery")&&(t+=.25),Game.Has("Heavenly confectionery")&&(t+=.25),Game.Has("Heavenly key")&&(t+=.25),e*t}function Get_Frenzy_Mult(){return Game.frenzy>0?Game.frenzyPower:1}function Manage_Building_Tooltip(e){var t=e.id,a=new Array(CM_Lucky("reg",!0),CM_Lucky("frenzy",!0)),o=new Array("none","none");new Array("","");var n=new Array(0,0);Game.cookies-e.price<a[0]&&(o[0]="block",n[0]=a[0]-(Game.cookies-e.price)),Game.cookies-e.price<a[1]&&(o[1]="block",n[1]=a[1]-(Game.cookies-e.price)),e.desc==building_tooltips[e.id]&&(e.desc+='<div id="cm_ob_div_'+t+'" style="position:relative; height:126px; background:#222222; border:1px solid #000000; margin:6px -6px -6px -6px; display:none;"></div>',e.desc+='<div id="cm_ob_lucky_div_'+t+'" style="position:absolute; top:-25px; left:-12px; height:32px;">'+'<div id="cm_ob_lucky_div_warning" style="background:url(http://frozenelm.com/cookiemonster/images/warning.png); position:relative; float:left; height:32px; width:32px; display:none;"></div>'+'<div id="cm_ob_lucky_div_caution" style="background:url(http://frozenelm.com/cookiemonster/images/caution.png); position:relative; float:left; height:32px; width:32px; display:none;"></div>'+"</div>",e.desc+='<div id="cm_ob_note_div_'+t+'" style="position:absolute; left:0px; margin-top:10px; color:white;">'+'<div id="cm_ob_note_div_warning" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FF0000;"><b style="color:#FF0000;">Warning:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!"</br><span id="cm_ob_warning_amount"></span>'+'<div id="cm_ob_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/cookiemonster/images/warning.png" height=16px width=16px></div></div>'+'<div id="cm_ob_note_div_caution" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FFFF00;"><b style="color:#FFFF00;">Caution:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!" (Frenzy)</br><span id="cm_ob_caution_amount"></span>'+'<div id="cm_ob_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/cookiemonster/images/caution.png" height=16px width=16px></div></div>'+"</div>",Game.RebuildStore());var s=new Array("FFFF00","FFFF00"),r=new Array(hold_cpi[t],hold_be[t],hold_tc[t]),d=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_be),Math.max.apply(Math,hold_tc)),c=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_be),Math.min.apply(Math,hold_tc));for(i=0;i<s.length;i++)r[i]==c[i]?s[i]="00FF00":r[i]==d[i]?s[i]="FF0000":d[i]-r[i]<r[i]-c[i]&&(s[i]="FF7F00");1==$("#cm_ob_div_"+t).length&&($("#cm_ob_div_"+t).css("border","1px solid #"+s[0]),$("#cm_ob_div_"+t).css("display",""),$("#cm_ob_div_"+t).html('<div style="position:absolute; top:4px; left:4px; color:#4bb8f0; font-weight:bold;">Bonus Income</div><div align=right style="position:absolute; top:18px; left:4px; color:white;">'+formatNum(hold_is[t])+"</div>"+'<div style="position:absolute; top:34px; left:4px; color:#4bb8f0; font-weight:bold;">Base Cost Per Income</div>'+'<div align=right style="position:absolute; top:48px; left:4px; color:#'+s[0]+';">'+formatNum(r[0])+"</div>"+'<div style="position:absolute; top:64px; left:4px; color:#4bb8f0; font-weight:bold;">Break-even Time</div>'+'<div align=right style="position:absolute; top:78px; left:4px; color:#'+s[1]+';">'+formatTime(r[1],"")+"</div>"+'<div style="position:absolute; top:94px; left:4px; color:#4bb8f0; font-weight:bold;">Time Left</div>'+'<div align=right style="position:absolute; top:108px; left:4px; color:#'+s[2]+';">'+formatTime(r[2],"")+"</div>"),$("#cm_ob_warning_amount").text("Deficit: "+formatNum(n[0])),$("#cm_ob_caution_amount").text("Deficit: "+formatNum(n[1])),1==settings[10]||2==settings[10]?($("#cm_ob_lucky_div_warning").css("display",o[0]),$("#cm_ob_lucky_div_caution").css("display",o[1])):($("#cm_ob_lucky_div_warning").css("display","none"),$("#cm_ob_lucky_div_caution").css("display","none")),1==settings[10]||3==settings[10]?($("#cm_ob_note_div_warning").css("display",o[0]),$("#cm_ob_note_div_caution").css("display",o[1])):($("#cm_ob_note_div_warning").css("display","none"),$("#cm_ob_note_div_caution").css("display","none"))),1==settings[6]?$("#product"+t).find(".price").first().css("color","#"+s[0]):$("#product"+t).find(".price").first().css("color","")}function Make_Table(){var e='<th align=left width=130 style="color:#FFFF00;"> '+version+"</th>",t="",a="",o="";Game.ObjectsById.forEach(function(n,i){e+='<th align=middle id="cookie_monster_item_'+i+'" style="font-weight:bold;"></th>',t+='<td align=middle id="cookie_monster_is_'+i+'"></td>',a+='<td align=middle id="cookie_monster_cpi_'+i+'"></td>',o+='<td align=middle id="cookie_monster_tc_'+i+'"></td>'}),$("#cookie_monster_bar").html('<table style="width:100%; table-layout:fixed; margin-top:2px;"><tr>'+e+"</tr>"+'<tr><th align=right style="color:#4bb8f0;">Bonus Income</th>'+t+"</tr>"+'<tr><th align=right style="color:#4bb8f0;">Base Cost Per Income</th>'+a+"</tr>"+'<tr><th align=right style="color:#4bb8f0;">Time Left</th>'+o+"</tr>"+"</table>")}function Update_Table(){Game.ObjectsById.forEach(function(e,t){var a=e.price,o=e.amount;e.storedTotalCps;var n=e.storedCps*Game.globalCpsMult;"Grandma"==e.name&&(n=0);var i=Math.round(100*(n+Get_Upgrade_Bonuses(e.name,o,n)))/100,s=Math.round(100*(a/i))/100,r=e.name.replace(/([^\s]+)/,"");hold_item[t]=e.name.replace(r,"")+' (<span style="color:#4bb8f0;">'+formatNum(o)+"</span>)",hold_is[t]=Math.round(100*i)/100,hold_cpi[t]=Math.round(100*s)/100,hold_be[t]=Math.round(100*(a/i))/100,hold_tc[t]=Math.round(Seconds_Left(t,"ob"))
}),Game.ObjectsById.forEach(function(e,t){var a=new Array("FFFF00","FFFF00"),o=new Array(hold_cpi[t],hold_tc[t]),n=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),s=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<a.length;i++)o[i]==s[i]?a[i]="00FF00":o[i]==n[i]?a[i]="FF0000":n[i]-o[i]<o[i]-s[i]&&(a[i]="FF7F00");$("#cookie_monster_item_"+t).html(hold_item[t]),$("#cookie_monster_is_"+t).html(formatNum(hold_is[t])),$("#cookie_monster_cpi_"+t).html('<span style="color:#'+a[0]+';">'+formatNum(o[0])+"</span>"),$("#cookie_monster_tc_"+t).html('<span style="color:#'+a[1]+';">'+formatTime(o[1],"min")+"</span>")})}function Do_Emphasize(){var e=$("#cookie_monster_golden_overlay"),t=$("#goldenCookie");if("none"!=t.css("display")||emphasize||(emphasize=!0,gc_avail=""),"none"!=t.css("display")&&emphasize){if(emphasize=!1,1==settings[9]&&(gc_avail="(G) ",Fav_Icon_Spinner(1)),1==settings[8]){var a=new Audio("http://frozenelm.com/cookiemonster/sounds/ba%20dink.mp3");a.volume=1,a.play()}1==settings[0]&&($("#cookie_monster_overlay").fadeIn(100),$("#cookie_monster_overlay").fadeOut(500))}"none"!=t.css("display")&&1==settings[1]?(e.css("display","block"),e.css("opacity",t.css("opacity")),e.css("left",t.css("left")),e.css("top",t.css("top")),e.html('<div style="position:absolute; top:30px; width:96px; height:36px;">'+Math.round(Game.goldenCookie.life/Game.fps)+"</div>")):e.css("display","none")}function Manage_Buffs(){var e="",t="",a=0,o=13+13*Game.Has("Get lucky"),n=new Array(Game.goldenCookie.time,Game.goldenCookie.minTime,Game.goldenCookie.maxTime),i=parseInt($("#cookie_monster_timer_bars_div").css("width"));switch(Game.frenzyPower){case 7:a=77+77*Game.Has("Get lucky"),e="Frenzy",t="FFFF00";break;case 666:a=6+6*Game.Has("Get lucky"),e="Blood Frenzy",t="00FF00";break;case.5:a=66+66*Game.Has("Get lucky"),e="Clot",t="FF0000"}Game.frenzy>0&&1==settings[2]?(1!=$("#cookie_monster_timer_"+t).length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_'+t+'" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr>'+'<td style="width:130px; text-align:right;">'+e+"<td>"+'<td><div id="cmt_'+t+'" style="position:relative; background:#'+t+"; height:10px; width:"+100*(Game.frenzy/n[2])+'%; margin-left:4px; border:1px solid black;"><div id="cmt_time_'+t+'" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+a+"</div></div></td>"+'<td style="width:55px;"></td>'+"</table></div>"):($("#cmt_"+t).css("width",100*(Game.frenzy/n[2])+"%"),$("#cmt_time_"+t).text(Math.round(Game.frenzy/Game.fps))),$("#cookie_monster_timer_"+t).fadeIn(250),"1"==$("#cookie_monster_timer_FFFF00").css("opacity")&&"FFFF00"!=t&&$("#cookie_monster_timer_FFFF00").fadeOut(250),"1"==$("#cookie_monster_timer_00FF00").css("opacity")&&"00FF00"!=t&&$("#cookie_monster_timer_00FF00").fadeOut(250),"1"==$("#cookie_monster_timer_FF0000").css("opacity")&&"FF0000"!=t&&$("#cookie_monster_timer_FF0000").fadeOut(250)):1==$("#cookie_monster_timer_"+t).length&&"1"==$("#cookie_monster_timer_"+t).css("opacity")&&$("#cookie_monster_timer_"+t).fadeOut(250),Game.clickFrenzy>0&&1==settings[2]?(1!=$("#cookie_monster_timer_4BB8F0").length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_4BB8F0" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">Click Frenzy<td><td><div id="cmt_4BB8F0" style="position:relative; background:#4BB8F0; height:10px; width:'+100*(Game.clickFrenzy/n[2])+'%; margin-left:4px; border:1px solid black;"><div id="cmt_time_4BB8F0" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+o+"</div></div></td>"+'<td style="width:55px;"></td>'+"</table></div>"):($("#cmt_4BB8F0").css("width",100*(Game.clickFrenzy/n[2])+"%"),$("#cmt_time_4BB8F0").text(Math.round(Game.clickFrenzy/Game.fps))),$("#cookie_monster_timer_4BB8F0").fadeIn(250)):1==$("#cookie_monster_timer_4BB8F0").length&&"1"==$("#cookie_monster_timer_4BB8F0").css("opacity")&&$("#cookie_monster_timer_4BB8F0").fadeOut(250),n[0]>0&&"none"==$("#goldenCookie").css("display")&&1==settings[4]?(1!=$("#cookie_monster_timer_FF00FF").length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_FF00FF" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr><td style="width:130px; text-align:right;">Next Cookie<td><td><div id="cmt_FF00FF" style="position:relative; background:#aaaaaa; height:10px; width:100%; margin-left:4px; border:1px solid black;"><div id="cmt2_FF00FF" style="position:relative; background:#FF00FF; height:10px; width:100%; margin-left:0px; max-width:'+.67*(i-189)+'px; float:right;"></div><div id="cmt_time_FF00FF" style="text-align:left; position:absolute; right:-50px; top:-5px; width:45px;">'+Math.round((n[2]-n[0])/Game.fps)+"</div></div></td>"+'<td style="width:55px;"></td>'+"</table></div>"):($("#cmt2_FF00FF").css("max-width",.67*(i-189)+"px"),$("#cmt_FF00FF").css("width",100*((n[2]-n[0])/n[2])+"%"),$("#cmt_time_FF00FF").text(Math.round((n[2]-n[0])/Game.fps))),$("#cookie_monster_timer_FF00FF").fadeIn(250)):1==$("#cookie_monster_timer_FF00FF").length&&"1"==$("#cookie_monster_timer_FF00FF").css("opacity")&&$("#cookie_monster_timer_FF00FF").fadeOut(250),(n[2]-n[0])/Game.fps>0&&"none"==$("#goldenCookie").css("display")&&(gc_avail=1==settings[4]?"("+Math.round((n[2]-n[0])/Game.fps)+") ":""),$.each(Game.wrinklers,function(e,t){t.close>0?(sucked_text=1==t.close?formatNum(t.sucked):"approaching",bar_size=1==t.close?100*(t.hp/3):100*t.close,1!=$("#cookie_monster_timer_wrinkler"+t.id).length?$("#cookie_monster_timer_bars_div").append('<div id="cookie_monster_timer_wrinkler'+t.id+'" style="padding:4px 0px 5px 0px;"><table cellpadding=0 cellspacing=0 style="font-style:inherit; color:inherit;  width:100%;"><tr>'+'<td style="width:130px; text-align:right;">Wrinkler<td>'+'<td><div id="cmt_wrinkler'+t.id+'" style="position:relative; background:#661100; height:10px; width:'+bar_size+'%; margin-left:4px; border:1px solid black;">'+'<div id="cmt_time_wrinkler'+t.id+'" style="text-align:left; position:absolute; right:-100px; top:-5px; width:95px;">'+sucked_text+"</div></div></td>"+'<td style="width:105px;"></td>'+"</table></div>"):($("#cmt_wrinkler"+t.id).css("width",bar_size+"%"),$("#cmt_time_wrinkler"+t.id).text(sucked_text)),$("#cookie_monster_timer_wrinkler"+t.id).fadeIn(250)):1==$("#cookie_monster_timer_wrinkler"+t.id).length&&"1"==$("#cookie_monster_timer_wrinkler"+t.id).css("opacity")&&$("#cookie_monster_timer_wrinkler"+t.id).fadeOut(250)}),$("#versionNumber").css("bottom",$("#cookie_monster_timer_bars_div").css("height"))}function Get_Upgrade_Bonuses(e,t,a){var o=0,n=0;switch(e){case"Cursor":0==t&&(n+=_cha("Click")),1==t&&(n+=_cha("Double-click")),49==t&&(n+=_cha("Mouse wheel")),99==t&&(n+=_cha("Of Mice and Men")),199==t&&(n+=_cha("The Digital"));break;case"Grandma":o+=Get_Grandma_Mod_Total(t)*Game.globalCpsMult,o+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==t&&(n+=_cha("Grandma's Cookies")),49==t&&(n+=_cha("Sloppy kisses")),99==t&&(n+=_cha("Retirement home")),149==t&&(n+=_cha("Friend of the ancients")),199==t&&(n+=_cha("Ruler of the ancients"));break;case"Farm":o+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==t&&(n+=_cha("My first farm")),49==t&&(n+=_cha("Reap what you sow")),99==t&&(n+=_cha("Farm ill"));break;case"Factory":o+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==t&&(n+=_cha("Production chain")),49==t&&(n+=_cha("Industrial revolution")),99==t&&(n+=_cha("Global warming"));break;case"Mine":o+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==t&&(n+=_cha("You know the drill")),49==t&&(n+=_cha("Excavation site")),99==t&&(n+=_cha("Hollow the planet"));break;case"Shipment":o+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==t&&(n+=_cha("Expedition")),49==t&&(n+=_cha("Galactic highway")),99==t&&(n+=_cha("Far far away"));break;case"Alchemy lab":o+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==t&&(n+=_cha("Transmutation")),49==t&&(n+=_cha("Transmogrification")),99==t&&(n+=_cha("Gold member"));break;case"Portal":o+=Get_Portal_Mod_Total()*Game.globalCpsMult,o+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==t&&(n+=_cha("A whole new world")),49==t&&(n+=_cha("Now you're thinking")),99==t&&(n+=_cha("Dimensional shift"));break;case"Time machine":o+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==t&&(n+=_cha("Time warp")),49==t&&(n+=_cha("Alternate timeline")),99==t&&(n+=_cha("Rewriting history"));break;case"Antimatter condenser":o+=Get_Cursor_Mod_Total()*Game.globalCpsMult,0==t&&(n+=_cha("Antibatter")),49==t&&(n+=_cha("Quirky quarks")),99==t&&(n+=_cha("It does matter!"))}return 99==Game.BuildingsOwned&&(n+=_cha("Builder")),399==Game.BuildingsOwned&&(n+=_cha("Architect")),799==Game.BuildingsOwned&&(n+=_cha("Engineer")),_owe(e)&&n++,_mat(e)&&n++,_bat(e)&&n++,_cen(e)&&n++,o+Get_Achi_Worth(n,0,o+a,0)}function _bat(e){if(1==_cha("Base 10")){var t=new Array,a=new Array;Game.ObjectsById.forEach(function(e){t.push(e.name),a.push(e.amount)}),t.forEach(function(t,o){t==e&&a[o]++});for(var o=10*a.length,n=0;n<a.length;n++){if(a[n]<o)return!1;o-=10}return!0}return!1}function _mat(e){if(1==_cha("Mathematician")){var t=new Array,a=new Array;Game.ObjectsById.forEach(function(e){t.push(e.name),a.push(e.amount)}),t.forEach(function(t,o){t==e&&a[o]++});for(var o=128,n=0;n<a.length;n++)if(n>2&&(o/=2),a[n]<o)return!1;return!0}return!1}function _owe(e){if(1==_cha("One with everything")){var t=new Array,a=new Array;if(Game.ObjectsById.forEach(function(e){e.amount>0?t.push(e.name):a.push(e.name)}),1==a.length&&a[0]==e)return!0}return!1}function _cen(e){if(1==_cha("Centennial")){var t=new Array,a=new Array;if(Game.ObjectsById.forEach(function(e){e.amount>=100?t.push(e.name):a.push(e)}),1==a.length&&a[0].name==e&&99==a[0].amount)return!0}return!1}function Get_Cursor_Mod_Total(){var e=0;return Game.UpgradesById.forEach(function(t){if(t.bought&&-1!=t.desc.indexOf("The mouse and cursors gain")){var a=31;-1!=t.desc.indexOf(" another ")&&(a+=8),e+=1*t.desc.substr(a,t.desc.indexOf("<",a)-a)}}),e*Game.ObjectsById[0].amount}function Get_Grandma_Mod_Total(e){var t=.5,a=0,o=1;return Game.UpgradesById.forEach(function(n){n.bought&&"Forwards from grandma"==n.name&&(t+=.3),n.bought&&-1!=n.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(o=2*o),n.bought&&-1!=n.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(o=4*o),n.bought&&-1!=n.desc.indexOf("for each 50 grandmas")&&(a+=.02*(e+1)*(e+1)-.02*e*e),n.bought&&-1!=n.desc.indexOf("for each 20 portals")&&(a+=.05*Game.ObjectsById[7].amount)}),t*o+a*o}function Get_Portal_Mod_Total(){var e=0,t=1;return Game.UpgradesById.forEach(function(a){a.bought&&-1!=a.desc.indexOf("Grandmas are <b>twice</b> as efficient.")&&(t=2*t),a.bought&&-1!=a.desc.indexOf("Grandmas are <b>4 times</b> as efficient.")&&(t=4*t),a.bought&&-1!=a.desc.indexOf("for each 20 portals")&&(e+=.05*Game.ObjectsById[1].amount)}),e*t}function inStore(e){return-1!=Game.UpgradesInStore.indexOf(e)?!0:!1}function formatNum(e){return _sts(e,!1).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatNumB(e){return _sts(e,!0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatTime(e,t,a){if(a||(a=0),e=Math.round(e*Math.pow(10,a))/Math.pow(10,a),1/0==e)return"Never";if(0==e)return"Done!";if(e/86400>1e3)return"> 1,000 days";var o=parseInt(e/86400)%999,n=parseInt(e/3600)%24,i=parseInt(e/60)%60,s=e%60,r=new Array(" days, "," hours, "," minutes, "," seconds");"min"==t?r=new Array("d, ","h, ","m, ","s"):(1==o&&(r[0]=" day, "),1==n&&(r[1]=" hour, "),1==i&&(r[2]=" minute, "),1==s&&(r[3]=" second"));var d="";return o>0&&(d=d+o+r[0]),(o>0||n>0)&&(d=d+n+r[1]),(o>0||n>0||i>0)&&(d=d+i+r[2]),(o>0||n>0||i>0||s>0)&&(d=d+s+r[3]),d}function Colorize(e,t,a){var o=Game.UpgradesById[t],n=o.basePrice,s=new Array("FFFF00","FFFF00"),r=new Array(Math.round(100*(n/e))/100,Math.round(Seconds_Left(t,"up"))),d=new Array(Math.max.apply(Math,hold_cpi),Math.max.apply(Math,hold_tc)),c=new Array(Math.min.apply(Math,hold_cpi),Math.min.apply(Math,hold_tc));for(i=0;i<s.length;i++)r[i]<c[i]?(s[i]="4BB8F0",inStore(o)&&0==i&&in_store[0]++):r[i]==c[i]?(s[i]="00FF00",inStore(o)&&0==i&&in_store[1]++):r[i]==d[i]?(s[i]="FF0000",inStore(o)&&0==i&&in_store[4]++):r[i]>d[i]?(s[i]="FF00FF",inStore(o)&&0==i&&in_store[5]++):d[i]-r[i]<r[i]-c[i]?(s[i]="FF7F00",inStore(o)&&0==i&&in_store[3]++):inStore(o)&&0==i&&in_store[2]++;for(i=0;i<in_store.length;i++)$("#cm_up_q"+i).text(in_store[i]);if(settings[11]&&inStore(o)&&$("#upgrade"+Game.UpgradesInStore.indexOf(o)).html('<div style="background-color:#'+s[0]+'; border:1px solid black; position:absolute; z-index:21; top:2px; left:2px; height:14px; width:14px; pointer-events:none;"></div>'),1==$("#cm_up_div_"+t).length){var l=new Array(CM_Lucky("reg",!0),CM_Lucky("frenzy",!0)),u=new Array("none","none"),m=new Array(0,0);Game.cookies-n<l[0]&&(u[0]="block",m[0]=l[0]-(Game.cookies-n)),Game.cookies-n<l[1]&&(u[1]="block",m[1]=l[1]-(Game.cookies-n)),$("#cm_up_div_"+t).css("border","1px solid #"+s[0]),$("#cm_up_div_"+t).css("display",""),$("#cm_up_div_"+t).html('<div style="position:absolute; top:4px; left:4px; color:#4bb8f0; font-weight:bold;">Bonus Income</div><div align=right style="position:absolute; top:18px; left:4px; color:white;">'+formatNum(Math.round(100*e)/100)+'</div><div style="position:absolute; top:34px; left:4px; color:#4bb8f0; font-weight:bold;">Base Cost Per Income</div><div align=right style="position:absolute; top:48px; left:4px; color:#'+s[0]+';">'+formatNum(r[0])+'</div><div style="position:absolute; top:64px; left:4px; color:#4bb8f0; font-weight:bold;">Time Left</div><div align=right style="position:absolute; top:78px; left:4px; color:#'+s[1]+';">'+formatTime(r[1],"min")+"</div>"),$("#cm_up_warning_amount").text("Deficit: "+formatNum(m[0])),$("#cm_up_caution_amount").text("Deficit: "+formatNum(m[1])),1==settings[10]||2==settings[10]?($("#cm_up_lucky_div_warning").css("display",u[0]),$("#cm_up_lucky_div_caution").css("display",u[1])):($("#cm_up_lucky_div_warning").css("display","none"),$("#cm_up_lucky_div_caution").css("display","none")),1==settings[10]||3==settings[10]?($("#cm_up_note_div_warning").css("display",u[0]),$("#cm_up_note_div_caution").css("display",u[1])):($("#cm_up_note_div_warning").css("display","none"),$("#cm_up_note_div_caution").css("display","none"))}return a?(s="000000",'<div id="cm_up_lucky_div_'+t+'" style="position:absolute; top:-25px; left:-12px; height:32px;">'+'<div id="cm_up_lucky_div_warning" style="background:url(http://frozenelm.com/images/cookiemonster/warning.png); position:relative; float:left; height:32px; width:32px; display:none;"></div>'+'<div id="cm_up_lucky_div_caution" style="background:url(http://frozenelm.com/images/cookiemonster/caution.png); position:relative; float:left; height:32px; width:32px; display:none;"></div>'+"</div>"+'<div id="cm_up_div_'+t+'" style="position:relative; height:96px; background:#222222; border:1px solid #'+s+'; margin:6px -6px -6px -6px; display:none;"></div>'+'<div id="cm_up_note_div_'+t+'" style="position:absolute; left:0px; margin-top:10px; color:white;">'+'<div id="cm_up_note_div_warning" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FF0000;"><b style="color:#FF0000;">Warning:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!"</br><span id="cm_up_warning_amount"></span>'+'<div id="cm_up_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/images/cookiemonster/warning.png" height=16px width=16px></div></div>'+'<div id="cm_up_note_div_caution" style="background:#222222; position:relative; display:none; margin-top:4px; padding:2px; border:1px solid #FFFF00;"><b style="color:#FFFF00;">Caution:</b> Purchase of this item will put you under the number of Cookies required for "Lucky!" (Frenzy)</br><span id="cm_up_caution_amount"></span>'+'<div id="cm_up_lucky_div_warning" style="position:absolute; left:-10px; top:-10px; height:32px; width:32px;"><img src="http://frozenelm.com/images/cookiemonster/caution.png" height=16px width=16px></div></div>'+"</div>"):void 0}function Factor_Time(e){var t=Game.cookies-e,a=Game.cookiesPs;if(0==a)return 1;if(0>t){var o=e/a;return 1- -1*t/a/o}return 1}function Seconds_Left(e,t){var a=0;"ob"==t&&(a=Game.ObjectsById[e].price),"up"==t&&(a=Game.UpgradesById[e].basePrice);var o=Game.cookies-a,n=Game.cookiesPs;if(0==n)return 0;if(0>o){var i=-1*o/n;return i}return 0}function _sts(e,t){var a=settings[7];if(a>0)for(var o=1e33,n=sts_type[a-1].length-1;n>=0;n--){var i=(e/o%999).toFixed(3);if(i>=1)return i+sts_type[a-1][n];o/=1e3}return t?Math.round(e):Math.round(100*e)/100}function Sell_Out_Value(){var e=0,t=Game.cookies,a=new Array,o=0;for(Game.ObjectsById.forEach(function(e,t){a[t]=e.amount,o+=e.amount});t>=15||o>0;)for(var n=a.length-1;n>=0;n--){for(var i=!1,s=a[n],r=Game.ObjectsById[n],d=s;d>0;d--)t+=Math.floor(r.basePrice*Math.pow(1.15,d)/2),e+=Math.floor(r.basePrice*Math.pow(1.15,d)/2),a[n]--,o--;for(;t>=r.basePrice*Math.pow(1.15,a[n]);)i=!0,t-=r.basePrice*Math.pow(1.15,a[n]),a[n]++,o++;if(i)break}sell_out=e}function Sell_Out(){confirm("*** WARNING ***\nYou will have no buildings or cookies left after this.")&&(Game.ObjectsById.forEach(function(e){setTimeout(function(){for(;e.amount>0;)e.sell()})}),setTimeout(function(){Buy_Sell()}))}function Buy_Sell(){if(Game.cookies<1e9&&Game.BuildingsOwned<100)return Buy_Sell_No_Wait(),!1;for(var e=Game.ObjectsById.length-1;e>=0;e--){var t=Game.ObjectsById[e];if(t.price<=Game.cookies)return t.buy(),setTimeout(function(){Buy_Sell()}),!1;if(t.price>Game.cookies&&t.amount>0)return t.sell(),setTimeout(function(){Buy_Sell()}),!1}setTimeout(function(){Buy_Sell()})}function Buy_Sell_No_Wait(){if(Game.cookies<15)return!1;for(var e=Game.ObjectsById.length-1;e>=0;e--){var t=Game.ObjectsById[e];if(t.sell(),t.price<=Game.cookies)return t.buy(),t.sell(),Buy_Sell_No_Wait(),!1}Buy_Sell_No_Wait()}function Get_True_CPI(e,t){var a=0,o=0,n=0;if("ob"==t&&(a=Seconds_Left(Game.ObjectsById[e],"ob"),o=Game.ObjectsById[e].price,n=hold_is[e]),"up"==t){a=Seconds_Left(Game.UpgradesById[e],"up"),o=Game.UpgradesById[e].basePrice;for(var i=0;upgrade_count>i;i++)if(_cup(i,e,!1)){n=Manage_Tooltip(i,e,!1,!0);break}}var s=o/n;return Game.ObjectsById.forEach(function(i,r){var d=i.price,c=hold_is[r],l=Seconds_Left(i,"ob");if(a>l&&("up"==t||r!=e)){var u=a-l,m=c*u,h=o-d+m,f=h/n;f>s&&(s=f)}}),s}function Test_True_CPI(e,t){var a=0,o=0,n=0,i=0;if("ob"==t&&(a=Seconds_Left(e,"ob"),n=Game.ObjectsById[e].price,i=hold_is[e]),"up"==t){a=Seconds_Left(e,"up"),n=Game.UpgradesById[e].basePrice;for(var s=0;upgrade_count>s;s++)if(_cup(s,e,!1)){i=Manage_Tooltip(s,e,!1,!0);break}}var r=Organize_Object_List(),d=n,c=d/i,l=c,u=i;return r.forEach(function(s,c){if(n>s.price&&("up"==t||s.id!=e)){var m=s.price,h=hold_is[s.id],f=hold_cpi[s.id];0==u&&(u=h),0==l&&(l=f);var p=Seconds_Left(s.id,"ob"),g=0,b=r[c+1];if(b.id!=r.length&&(hold_cpi[b.id]<l||b.id==e)&&(g=Seconds_Left(b.id,"ob"),l=hold_cpi[b.id],u=h),a-o>p){var k=g-p;o+=k;var v=u*k;k>0&&(i-=u,d=d-m+v)}}}),c=d/i}function Organize_Object_List(){var e=new Array;return Game.ObjectsById.forEach(function(t){var a=!0;e.length>0?(e.forEach(function(o,n){t.price<o.price&&a&&(a=!1,e.splice(n,0,t),e.join())}),a&&e.push(t)):e.push(t)}),e}var version="v.1.038.01",emphasize=!0,tooltips=new Array,building_tooltips=new Array,hold_item=new Array,hold_is=new Array,hold_cpi=new Array,hold_be=new Array,hold_tc=new Array,gc_avail="",settings=new Array,in_store=new Array(0,0,0,0,0,0),sell_out=0,upgrade_count=33,sts_type=new Array([" M"," B"," T"," Qa"," Qi"," Sx"," Sp"," Oc"," No"," Dc"],[" M"," G"," T"," P"," E"," Z"," Y"," Oc"," No"," Dc"]),loops=0;-1!=document.title.indexOf("Cookie Clicker")&&0!=$("#game").length?Start_Cookie_Monster():alert("Cookie Monster "+version+"\n\nThese aren't the droids you're looking for.");